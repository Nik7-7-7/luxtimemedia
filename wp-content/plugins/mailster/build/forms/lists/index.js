(()=>{var e={6942:(e,t)=>{var l;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e="",t=0;t<arguments.length;t++){var l=arguments[t];l&&(e=s(e,n(l)))}return e}function n(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return a.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var l in e)r.call(e,l)&&e[l]&&(t=s(t,l));return t}function s(e,t){return t?e?e+" "+t:e+t:e}e.exports?(a.default=a,e.exports=a):void 0===(l=function(){return a}.apply(t,[]))||(e.exports=l)}()}},t={};function l(r){var a=t[r];if(void 0!==a)return a.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,l),n.exports}l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var r in t)l.o(t,r)&&!l.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.blocks,t=window.wp.element;var r=l(6942),a=l.n(r);const n=window.wp.i18n,s=window.wp.blockEditor,i=window.wp.coreData,o=window.wp.data,c=window.wp.components,m=window.wp.primitives,u=(0,t.createElement)(m.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)(m.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"})),d=(0,t.createElement)(m.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)(m.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"}));function p(e){const{meta:l,setMeta:r,attributes:a={},setAttributes:s}=e,{userschoice:i,lists:m}=l,{showLabel:p=!1,label:h=""}=a,b=(0,o.useSelect)((e=>e("mailster/form").getLists()));function w(e,t){var l=[...m];t?l.push(e):l=l.filter((t=>t!=e)),r({lists:l})}function f(e,t){var l=[...m],a=l[e];l.splice(e,1),l.splice(e+t,0,a),r({lists:l})}const k=b?b.filter((e=>!m.includes(e.ID))):[];return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(c.PanelRow,null,(0,t.createElement)(c.CheckboxControl,{label:(0,n.__)("Users Choice","mailster"),checked:!!l.userschoice,onChange:()=>r({userschoice:!l.userschoice}),help:(0,n.__)("Users decide which list they subscribe to","mailster")})),!b&&(0,t.createElement)(c.Spinner,null),b&&m.length>0&&(0,t.createElement)(c.PanelRow,null,(0,t.createElement)(c.BaseControl,{id:"mailster-values",className:"widefat",label:i?(0,n.__)("Users can subscribe to","mailster"):(0,n.__)("Subscribe new users to","mailster")},(0,t.createElement)(c.Flex,{className:"mailster-value-options",justify:"flex-end",id:"mailster-values",style:{flexWrap:"wrap"}},m.map(((e,l)=>{const r=(e=>{const t=b.filter((t=>t.ID==e));return t.length?t[0]:null})(e);return r&&((e,l)=>(0,t.createElement)(c.Flex,{key:l,style:{flexShrink:0}},(0,t.createElement)(c.FlexItem,null,(0,t.createElement)(c.CheckboxControl,{checked:!0,value:e.ID,onChange:t=>{w(e.ID,t)},label:e.name})),m.length>1&&(0,t.createElement)(c.FlexItem,null,(0,t.createElement)(c.Button,{disabled:!l,icon:u,isSmall:!0,label:(0,n.__)("move up","mailster"),onClick:()=>{f(l,-1)}}),(0,t.createElement)(c.Button,{disabled:l+1==m.length,icon:d,isSmall:!0,label:(0,n.__)("move down","mailster"),onClick:()=>{f(l,1)}}))))(r,l)}))))),k.length>0&&(0,t.createElement)(c.PanelRow,null,(0,t.createElement)(c.BaseControl,{id:"mailster-values",className:"widefat",label:(0,n.__)("Available Lists","mailster")},(0,t.createElement)(c.Flex,{className:"mailster-value-options",justify:"flex-end",id:"mailster-values",style:{flexWrap:"wrap"}},k.map(((e,l)=>(0,t.createElement)(c.Flex,{key:l,style:{flexShrink:0}},(0,t.createElement)(c.FlexItem,null,(0,t.createElement)(c.CheckboxControl,{checked:m.includes(e.ID),value:e.ID,onChange:t=>{w(e.ID,t)},label:e.name})))))))),l.userschoice&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)(c.PanelRow,null,(0,t.createElement)(c.CheckboxControl,{label:(0,n.__)("Show Label","mailster"),checked:p,onChange:()=>s({showLabel:!p})})),(0,t.createElement)(c.PanelRow,null,(0,t.createElement)(c.TextControl,{className:"widefat",value:h,onChange:e=>s({label:e}),help:(0,n.__)("If the label is hidden it will be used for screen readers.","mailster")}))),l.userschoice&&m.length>0&&(0,t.createElement)(c.PanelRow,null,(0,t.createElement)(c.Tip,null,(0,n.__)("You can update the list names and the precheck status in the editor.","mailster"))))}function h(e){return(0,t.createElement)(s.InspectorControls,null,(0,t.createElement)(c.Panel,null,(0,t.createElement)(c.PanelBody,{title:(0,n.__)("List Settings","mailster")},(0,t.createElement)(p,e))))}const b=(0,t.createElement)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(m.Path,{d:"M14.3 6.7l-1.1 1.1 4 4H4v1.5h13.3l-4.1 4.4 1.1 1.1 5.8-6.3z"})),w=(0,t.createElement)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(m.Path,{d:"M16.2 13.2l-4 4V4h-1.5v13.3l-4.5-4.1-1 1.1 6.2 5.8 5.8-5.8-1-1.1z"}));function f(e){const{attributes:l,setAttributes:r}=e,{vertical:a}=l;return(0,t.createElement)(s.BlockControls,{group:"block"},(0,t.createElement)(c.ToolbarButton,{icon:a?b:w,onClick:()=>r({vertical:!a}),label:(0,n.__)("Orientation","mailster")}))}const k=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"mailster/lists","title":"Lists Field","category":"mailster-form-fields","keywords":["container","wrapper","row","section"],"parent":["mailster/form-wrapper","core/column","core/group"],"description":"Adds a List block to your Mailster Block Form","example":{},"supports":{"html":false,"reusable":false,"multiple":false,"inserter":false,"spacing":{"margin":true,"padding":true},"color":true},"attributes":{"lock":{"type":"object","default":{"remove":true}},"vertical":{"type":"boolean","default":false},"id":{"type":"string","source":"attribute","selector":"input","attribute":"id"},"showLabel":{"type":"boolean","default":false},"label":{"type":"string","source":"html","selector":"legend"},"lists":{"type":"array","source":"query","selector":"input","default":[],"query":{"id":{"type":"integer","source":"attribute","attribute":"value"},"name":{"type":"string","source":"attribute","attribute":"aria-label"},"checked":{"type":"boolean","source":"attribute","attribute":"checked"}}}},"textdomain":"mailster","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css"}'),E=(0,t.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)("path",{d:"M0,0H24V24H0Z",fill:"none"}),(0,t.createElement)("path",{d:"M12,12h8",fill:"none",stroke:"#323232",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,t.createElement)("path",{d:"M12,19h8",fill:"none",stroke:"#323232",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,t.createElement)("path",{d:"M12,5h8",fill:"none",stroke:"#323232",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,t.createElement)("line",{x1:"4.5",y1:"3.5",x2:"7.5",y2:"6.5",fill:"none",stroke:"#323232",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,t.createElement)("line",{x1:"7.5",y1:"3.5",x2:"4.5",y2:"6.5",fill:"none",stroke:"#323232",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,t.createElement)("path",{d:"M6.5,12.00063A.5.5,0,1,1,5.99937,11.5.5.5,0,0,1,6.5,12.00063",fill:"none",stroke:"#323232",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,t.createElement)("path",{d:"M6.5,19.00063A.5.5,0,1,1,5.99937,18.5.5.5,0,0,1,6.5,19.00063",fill:"none",stroke:"#323232",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})),{name:v,...g}=k;(0,e.registerBlockType)(v,{...g,icon:E,edit:function(e){const{attributes:l,setAttributes:r,isSelected:c,clientId:m}=e,{lists:u,vertical:d,showLabel:p,label:b}=l,w=["mailster-wrapper mailster-wrapper-_lists"],[k,E]=(0,i.useEntityProp)("postType","mailster-form","meta");d&&w.push("mailster-wrapper-is-vertical"),p&&w.push("mailster-show-label");const v=(0,s.useBlockProps)({className:a()({},w)}),g=(0,o.useSelect)((e=>e("mailster/form").getLists()),[]),y=(e,t)=>{(t||JSON.stringify(u)!==JSON.stringify(e))&&r({lists:e})};(0,t.useEffect)((()=>{if(k.lists&&g){var e=k.lists.map((e=>({id:e.toString(),name:x(e).name,checked:!!x(e).checked})));y(e)}}),[k.lists]),(0,t.useEffect)((()=>{l.id||r({id:"mailster-id-"+m.substring(30)})}));const x=e=>{const t=u.find((t=>t.id==e));return t||g.find((t=>t.ID==e))};return(0,t.createElement)("div",v,(0,t.createElement)("fieldset",null,(0,t.createElement)(s.RichText,{tagName:"legend",value:b||(0,n.__)("Lists","mailster"),onChange:e=>r({label:e}),placeholder:(0,n.__)("Enter Label","mailster")}),u.map(((e,l)=>(0,t.createElement)("div",{key:l,className:"mailster-group mailster-group-checkbox"},(0,t.createElement)("input",{type:"checkbox",value:e.id,checked:e.checked||!1,"aria-label":e.name,onChange:()=>((e,t)=>{var l=[...u];l[t].checked=e,y(l,!0)})(!e.checked,l)}),(0,t.createElement)(s.RichText,{tagName:"label",value:e.name,onChange:e=>((e,t)=>{var l=[...u];l[t].name=e,y(l,!0)})(e,l),allowedFormats:[],className:"mailster-label",placeholder:(0,n.__)("Enter Label","mailster")})))),!u.length&&(0,t.createElement)("i",null,(0,n.__)("Please select at least one list or disable user choice.","mailster"))),(0,t.createElement)(f,e),(0,t.createElement)(h,{meta:k,setMeta:E,attributes:l,setAttributes:r}))},save:function(e){const{attributes:l,setAttributes:r,isSelected:i}=e,{lists:o,vertical:c,showLabel:m,label:u}=l,d=["mailster-wrapper mailster-wrapper-_lists"];c&&d.push("mailster-wrapper-is-vertical"),m&&d.push("mailster-show-label");const p=s.useBlockProps.save({className:a()({},d)});return(0,t.createElement)("div",p,(0,t.createElement)("fieldset",null,(0,t.createElement)(s.RichText.Content,{tagName:"legend",value:u||(0,n.__)("Lists","mailster")}),o.map(((e,r)=>{const a=l.id+(r?"-"+r:"");return(0,t.createElement)("div",{key:r,className:"mailster-group mailster-group-checkbox"},(0,t.createElement)("input",{type:"checkbox",name:"_lists[]",id:a,value:e.id,checked:e.checked,"aria-label":e.name}),(0,t.createElement)(s.RichText.Content,{tagName:"label",htmlFor:a,value:e.name,className:"mailster-label"}))}))))}})})()})();