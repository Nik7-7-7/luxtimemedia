mailster=function(s,i,a,e){"use strict";var t,o=false,l,c;s.$.document.on("click","#filter, .mailster-condition-render-group",function(){s.util.tb_show(s.l10n.subscribers.filters,"#TB_inline?x=1&width=720&height=520&inlineId=mailster-subscriber-conditions",null);return false}).on("click","#apply-filter",function(){var e=s.conditions.serialize();var r=new URLSearchParams(a.location.search);var n=Object.fromEntries(r.entries());var i=u(n,"conditions");var t=Object.keys(i).map(function(e){return e+"="+i[e]}).join("&");if(r.toString()!=t+"&"+e){a.location.search=t+"&"+e}tb_remove()}).on("click","#close-filter",tb_remove).on("change","#cb-select-all-1, #cb-select-all-2",function(){var e=i("#all_subscribers"),r=e.data("label"),n=i(".subscriber_cb");l=e.data("count");c=n.length;if(i(this).is(":checked")&&l>i("#the-list").find("tr").length&&confirm(r)){n.prop("disabled",true);e.val(1)}else{e.val(0);n.prop("disabled",false)}}).on("submit","#subscribers-overview-form",function(e){var r=i(this),n=i("#all_subscribers");if(1==n.val()){e.preventDefault();if(o)return;o=true;a.onbeforeunload=function(){return s.l10n.subscribers.onbeforeunload};t=i('<div class="alignright bulk-update-info spinner">'+s.l10n.subscribers.initprogess+"</div>").prependTo(".bulkactions");f(r.serialize(),0,function(){t.removeClass("spinner");a.onbeforeunload=null;setTimeout(function(){location.reload()},1e3)})}});function u(e,r){var n={};for(var i in e){if(i.indexOf(r)==-1){n[i]=e[i]}}return n}function r(e,r){r=r.split("?");var n=r.length==1?"":r[1];n=n.replace(new RegExp("&?"+e+"\\[\\d*\\]=[\\w]+","g"),"");n=n.replace(new RegExp("&?"+e+"=[\\w]+","g"),"");n=n.replace(/^&/,"");return r[0]+(n.length?"?"+n:"")}function f(r,e,n){if(!e)e=0;i.post(location.href,{all_subscribers:true,post_data:r,page:e,per_page:c,count:l},function(e){t.html(e.data.message);if(e.success_message)s.log(e.success_message);if(e.data.error_message)s.log(e.data.error_message,"error");if(!e.data.finished){setTimeout(function(){f(r,e.data.page,n)},e.data.delay?e.data.delay:300)}else{n&&n()}})}return s}(mailster||{},jQuery,window,document);